<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>...</title>
    <script>
        const url = new URL(window.location.href);
        const params = new URLSearchParams(url.search);
        const deviceId = params.get('device_id');

        let queryString = ''

        localStorage.setItem('device_id', deviceId)
        getConfig();


        async function getConfig() {
            const settingsRes1 = await fetch('http://18.167.187.79/config_h5_develop.json?' + new Date().getTime())
            const settingsRes2 = await settingsRes1.json()
            const settingsRes = await fetch(settingsRes2.chat_setting + '?' + new Date().getTime())
            const settings = await settingsRes.json()
            if (settings.data) {
                queryString = Object.keys({
                    ...settings.data,
                })
                    .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(settings.data[key])}`)
                    .join('&');
                queryString += `&device_id=${deviceId}`
                const pc_api_url = settings.data.pc_api_url
                const h5_api_url = settings.data.h5_api_url
                if (isMobile()) {
                    location.href = h5_api_url + '?' + (queryString || '')
                } else {
                    location.href = pc_api_url + '?' + (queryString || '')
                }
            }

        }

        function isMobile() {
            let flag = navigator.userAgent.match(
                /(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i
            );
            return flag;
        }

    </script>
</head>

<body></body>

</html>